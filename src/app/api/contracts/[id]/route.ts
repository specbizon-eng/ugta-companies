import { NextResponse } from 'next/server'; import { prisma } from '@/lib/db'; import { getUserFromCookie } from '@/lib/auth'; export async function PATCH(req:Request,{params}:{params:{id:string}}){ const me=await getUserFromCookie(); if(!me||(me.role!=='STAFF'&&me.role!=='ADMIN')) return NextResponse.json({error:'Forbidden'},{status:403}); const data=await req.json(); const updated=await prisma.contract.update({where:{id:params.id},data}); return NextResponse.json(updated); }
